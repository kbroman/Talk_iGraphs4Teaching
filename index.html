<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="apple-mobile-web-app-capable" content="yes">

<style>
@import url(CSS/stack.css);
@import url(CSS/d3-tip.css);
@import url(CSS/kbroman_talk.css);
@import url(CSS/figures.css);
@import url(CSS/corr_w_scatter.css);
@import url(CSS/panelutil.css);
</style>

<script charset="utf-8" type="text/javascript" src="JS/d3.min.js"></script>
<script type="text/javascript" src="JS/d3.tip.js"></script>
<script type="text/javascript" src="JS/slide_transition.js"></script>

<title>Interactive graphics for teaching</title>
</head>
<body class="overview">



<section class="titlepage">
<h3 style="margin-top:-10px;" class="highlight">Interactive graphics
for teaching</h3>

<h4><a href="http://kbroman.org">Karl Broman</a></h4>
<p class="nopadding">Biostatistics &amp; Medical Informatics, University of Wisconsin
&ndash; Madison</p>

<p class="nopadding"><code>
<a href="http://kbroman.org" class="gray">kbroman.org</a><br/>
<a href="https://github.com/kbroman" class="gray">github.com/kbroman</a><br/>
<a href="https://twitter.com/kwbroman" class="gray">@kwbroman</a>
</code></p>

<p class="nopadding"><font class="gray">slides</a>: <code><a href="http://www.biostat.wisc.edu/~kbroman/presentations/iGraphs4Teaching">bit.ly/Bro2014-11b</a></code></font></p>

<img style="position:fixed;bottom: 30px; right:40px; z-index: -1;" width="150px" src="Figs/cc-zero.png" />



<aside>
These are slides for a talk I&rsquo;m giving
at a <a href="http://delta.wisc.edu">Delta Program</a> <a
href="http://delta.wisc.edu/events/roundtable.html">Round Table</a> on
20 Nov 2014.<br/><br/>

My aim, in the talk, is to emphasize the value of illustrations in
lecture slides: more interesting, more memorable, and better convey
the key points.<br/><br/>

In my research, I&rsquo;ve been developing interactive data
visualizations for genetics. I&rsquo;ve found such interactive
graphics to be hugely useful for teaching, as well.<br/><br/>

Click on the link at the top-right to remove these
notes.<br/><br/>

These slides were tested for Chrome on a Mac and might look terrible
in some browsers.
</aside>

</section>


<section>
<h3>Inbred mice</h3>

<ul class="tight" style="margin-top:100px;">
  <li>Product of <font class="highlight">many</font> generations of
  matings between siblings</li>
  <li>Effectively homozygous everywhere</li>
  <li>Valuable for biomedical research generally, by eliminating
  genetic variation</li>
  <li>Valuable for genetics research, as they allow construction of
  large experimental crosses</li>
</ul>

<aside>
Lecture slides often contains lots of bullet points.<br/><br/>

They&rsquo;re easy to construct, and they remind the lecturer of what to
say.<br/><br/>

But they&rsquo;re also rather dull and not very memorable.
</aside>

<p class="pg">2</p></section>

<section>

<h3>Inbred mice</h3>

<img style="position:fixed;bottom: 0px; left:0px; z-index: -1;" width="1280px" src="Figs/inbredmice.jpg" />

<aside>
I think it&rsquo;s nicer to show a photo: More interesting, and perhaps
more memorable. And you can just say the things that you were going to
say.<br/><br/>

And I think you get a bit extra by being able to say, &ldquo;These
mice are all genetically identical, and if you cross them, you get the
same thing again.&rdquo;<br/><br/>

I think these are <a
href="http://jaxmice.jax.org/strain/000689.html">SWR mice</a>; the
photo is from <a
href="http://cals.ncsu.edu/genetics/index.php/people/david-threadgill/">David
Threadgill</a>.
</aside>

<p class="pg">3</p></section>






<section>

<h3>Human vs mouse</h3>

<img style="position:fixed;top: 300px; left:120px; z-index: -1;" height="500px" src="Figs/da-vinci-man.jpg" />

<img style="position:fixed;top: 300px; right:120px; z-index: -1;" height="500px" src="Figs/vitruvian_mouse.jpg" />

<div style="position:fixed;bottom: 120px; right:120px;font-size:24px"><a href="http://www.daviddeen.com"><code>daviddeen.com</code></a></div>

<aside>
Illustrations are just more fun. You can make the same points that
you&rsquo;d make without the photo (e.g., &ldquo;Mice are not humans, but
you can learn a great deal about human biology and disease from
mice.&rdquo;) and everyone is a bit happier.<br/><br/>

The figure on the right is from <a
href="http://www.daviddeen.com">David Deen</a>.
</aside>
<p class="pg">4</p></section>






<section>

<h3>Intercross</h3>

<img src="Figs/intercross.png" />

<aside>
The main problem I tackle is to try to identify genes that underlie
phenotypic variation.<br/><br/>

When I talk about this, I just show this simple illustration of an
experimental cross between two inbred lines. I then explain the entire
idea with this one illustration.<br/><br/>

We gather phenotype data on the progeny, along with genome-wide genotype
data, and we seek to identify genomic regions for which genotype is
associated with phenotype. We call such regions quantitative trait
loci (QTL): genetic loci that influence a quantitative trait.
</aside>
<p class="pg">5</p></section>


<section>

<h3>Data</h3>

<img style="margin-top:40px;" src="Figs/qtl_data.png" />

<aside>
Rather than just talk about the data, or have a list of bullet points
that describe the data, it&rsquo;s best to actually <font
color="darkhilight">show</font> some data.
</aside>
<p class="pg">6</p></section>






<section>

<h3>Genome scan for QTL</h3>

<img src="Figs/lodcurve_insulin.png" />

<aside>
The simplest analysis is to do a statistical test at each locus in the
genome, to assess the association between genotype and
phenotype.<br/><br/>

We measure the association with a LOD score, but I won&rsquo;t explain
it here. The key is that large LOD scores indicate evidence for an
association.<br/><br/>

It is important to account for the scan across the genome. The dashed
horizontal line is a threshold for statistical significance. If there
were no association between genotype and phenotype, there&rsquo;d still be a
5% chance of a LOD score that big <font class="highlight">somewhere</font> in the genome.
</aside>
<p class="pg">7</p></section>





<section>

<h3>Genome scan for QTL</h3>

<img src="Figs/lodcurve_insulin_with_effects.png" />

<aside>
Underneath each of these peaks is an association between genotype and
phenotype: If you group the mice by genotype at that location, you&rsquo;ll
see a difference in the average phenotype among the groups.<br/><br/>

The BB, BR, and RR indicate the three different genotypes, as these
data concern a cross between two strains labeled B and R.<br/><br/>

This illustration has a tiny bit of animation; it helps to guide the
students&rsquo; focus in a complex figure.
</aside>
<p class="pg">7</p></section>



<section>
<h3>Random transposon mutagenesis</h3>
<img src="Figs/Mtb/mut1.png" />
<aside>
Here&rsquo;s another example of a slightly dynamic
illustration.<br/><br/>

Again, it helps to guide the students&rsquo; focus through a complex
figure.
</aside>
<p class="pg">8</p></section>

<section>
<h3>Random transposon mutagenesis</h3>
<img src="Figs/Mtb/mut2.png" />
<aside>
Here&rsquo;s another example of a slightly dynamic illustration.<br/><br/>

Again, it helps to guide the students&rsquo; focus through a complex
figure.
</aside>
<p class="pg">8</p></section>

<section>
<h3>Random transposon mutagenesis</h3>
<img src="Figs/Mtb/mut3.png" />
<aside>
Here&rsquo;s another example of a slightly dynamic illustration.<br/><br/>

Again, it helps to guide the students&rsquo; focus through a complex
figure.
</aside>
<p class="pg">8</p></section>

<section>
<h3>Random transposon mutagenesis</h3>
<img src="Figs/Mtb/mut4.png" />
<aside>
Here&rsquo;s another example of a slightly dynamic illustration.<br/><br/>

Again, it helps to guide the students&rsquo; focus through a complex
figure.
</aside>
<p class="pg">8</p></section>

<section>
<h3>Random transposon mutagenesis</h3>
<img src="Figs/Mtb/mut5.png" />
<aside>
Here&rsquo;s another example of a slightly dynamic illustration.<br/><br/>

Again, it helps to guide the students&rsquo; focus through a complex
figure.
</aside>
<p class="pg">8</p></section>

<section>
<h3>Random transposon mutagenesis</h3>
<img src="Figs/Mtb/mut6.png" />
<aside>
Here&rsquo;s another example of a slightly dynamic illustration.<br/><br/>

Again, it helps to guide the students&rsquo; focus through a complex
figure.
</aside>
<p class="pg">8</p></section>




<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc01.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc02.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc03.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc04.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc05.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc06.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc07.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc08.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc09.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc10.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc11.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc12.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>
<section>
<h3>Markov chain Monte Carlo</h3>
<img src="Figs/Mtb/mcmc13.png" />
<aside>
One more example of a dynamic illustration.
</aside>
<p class="pg">9</p></section>





<section>

<h3>Genome-scale phenotypes</h3>

<img height=700 class="indent" src="Figs/mouse_on_chips.png" />

<aside>
My data visualizations have been pretty pedestrian. But in the past
decade, I&rsquo;ve come to be swamped with data, and I&rsquo;m just beginning to
come to grips with that.<br/><br/>

This is a picture of a pile of gene expression arrays. More and more,
we&rsquo;re seeing genome-scale phenotype information. For example, in
one of my collaborations, we have data on 500 mice, each with gene
expression microarrays for 6 different tissues.<br/><br/>

Interactive graphics are an important tool for making sense of these
data.<br/><br/>

The photo is from <a
href="http://www.biochem.wisc.edu/faculty/attie/">Alan Attie</a>.
</aside>
<p class="pg">10</p></section>




<section>

<h3>Summary + details</h3>

<div id="corr_w_scatter" style="margin-left:-50px;"></div>

<script type="text/javascript" src="JS/corr_w_scatter.js"></script>

<aside>
Heatmaps of things like correlation matrices can be quite useful, but
they are often hard to read.  It&rsquo;s nice to be able to read off the
values by hovering.<br/><br/>

Even better: to be able to click on a pixel and view the corresponding
scatterplot.<br/><br/>

This is a set of genes whose expression values are associated with
genotype at a common locus. In the scatterplots, the points are colored
by genotype at that locus.
</aside>

<p class="codelink">
<a href="Coffee/corr_w_scatter.coffee" class="gray">code</a> |
<a href="Data/corr_w_scatter.json" class="gray">data</a></p>
<p class="pg">11</p></section>




<section>
<h3>Interactive genome scan</h3>

<div id="lod_and_effect" class="fig"></div>

<aside>
We know we should not rely solely on summary statistics (like the LOD
score), but if it takes an extra step to plot the underlying details,
we tend not to do it, or at least not so much as we should.<br/><br/>

I&rsquo;ve come to the conclusion that <em>every</em> graph could be
improved with interactivity. You at least want tooltips.<br/><br/>

The curves at the top are the same LOD curves we saw before. The LOD
score is a measure of association between genotype and phenotype.<br/><br/>

Click on a chromosome in the top panel to see a detailed view in the
lower-left panel.  Click on a marker in the lower-left panel to see
effect estimates and raw data on the right.  Hover over things on the
right to get some further information.
</aside>

<p class="codelink">
<a href="Coffee/lod_and_effect.coffee" class="gray">code</a> |
<a href="Data/insulinlod.json" class="gray">data</a></p>

<script type="text/javascript" src="JS/lod_and_effect.js"></script>
<p class="pg">12</p></section>




<section>

<h3>Permutation test</h3>

<div id="lod_onetime_random_fig" style="margin-left:-30px;"></div>

<p class="codelink">
<a href="Coffee/lod_onetime_random.coffee" class="gray">code</a> |
<a href="Data/onetime_random.json" class="gray">data</a></p>


<script type="text/javascript" src="JS/lod_onetime_random.js"></script>

<aside>
Interactive graphs are incredibly valuable educational tools.<br/><br/>

You can only show so many static graphs, and it can be a big step to get
students to make more, on their own.<br/><br/>

Interactive graphs can be a big help to build students&rsquo; intution
and understanding, both as a demonstration, and as a tool that they
can play with.<br/><br/>

This is an illustration of permutation test: Click the green button to shuffle
the phenotypes and re-draw the LOD curves.
</aside>

<p class="pg">13</p></section>


<section>

<h3>EM algorithm</h3>

<div id="em_alg" class="qtlcharts" style="margin-left:130px;"></div>

<p class="codelink">
<a href="Coffee/em_alg.coffee" class="gray">code</a> |
<a href="Data/em_alg_data.json" class="gray">data</a></p>


<script type="text/javascript" src="JS/scatterplot.js"></script>
<script type="text/javascript" src="JS/panelutil.js"></script>
<script type="text/javascript" src="JS/em_alg.js"></script>

<aside> Here&rsquo;s another teaching example, illustrating the EM algorithm
in QTL mapping.<br/><br/>

It&rsquo;s a plot of phenotype vs conditional genotype probabilities at each
iteration of the EM algorithm. Each point is an individual; pink line
segments are at the current estimated averages.<br/><br/>

Click on &ldquo;Next&rdquo; to go to next iteration and &rdquo;Back&ldquo; to go back. Hover
over points to see the prior QTL genotype probabilities; hover over
line segments to see estimated averages.
</aside>

<p class="pg">14</p></section>



<section>
<h3>Issues</h3>
<h3 class="abscenter"><font class="highlight">time</font></h3>
<aside>
Really the only issue is time. Making illustrations (particularly
interactive ones) is time consuming.<br/><br/>

How much more do students really learn from that figure? Is it really
worth it?<br/><br/>

One solution is to find (or build) tools that will make things
easier. Or incorporate others&rsquo; figures.<br/><br/>

I also focus on things with dual uses (e.g., for both my teaching and
my research).
</aside> <p class="pg">15</p></section>





<section nopadding>
<h3><a href="http://d3js.org">D3</a> is awesome!</h3>

<div id="learnd3" class="medtop">
<p>You <font class="darkgray">just</font> need to learn html, css, svg, and javascript.</p>
<p id="dotenter" style="opacity:0;">And don&rsquo;t forget <code>.enter()</code></p>
</div>

<div id="collision" style="position:fixed;top:-10px;left:-50px;width:1280px;height:960px;">
</div>

<div style="position:fixed;bottom:10px;left:10px;">
<code style="font-size:28px;"><a href="http://mbostock.github.io/d3/talk/20111018/collision.html">http://mbostock.github.io/d3/talk/20111018/collision.html</a></code></div>

<aside>
I&rsquo;m using <a href="http://d3js.org">D3</a>, a javascript
library for data visualization.  (D3 stands for &ldquo;data-driven
documents.&rdquo;)<br/><br/>

This is one of the images that convinced me that I wanted to learn D3.
There are lots of additional examples at the <a
href="https://github.com/mbostock/d3/wiki/Gallery">D3
gallery</a>.<br/><br/>

There&rsquo;s a ton to learn, and it&rsquo;s rather forbidding (and much of it is
dull).<br/><br/>

My most common mistake is to forget to include <code>.enter()</code>.
No error is given, but nothing shows up in the plot.
</aside>
<p class="pg">16</p></section>
<script type="text/javascript" src="JS/collision.js"></script>






<section>
<h3><a href="http://jsfiddle.net">JSFiddle</a> is awesome!</h3>

<a href="http://jsfiddle.net/kbroman/v4qhh/5">
    <img height=700 style="position:fixed;bottom:50px;left:100px;" src="Figs/jsfiddle.png">
</a>

<aside>
D3 can be forbidding, but just start making stuff. It&rsquo;s fun, and
eventually it&rsquo;s productive.<br/><br/>

Learn to use your browser&rsquo;s developer tools. When something goes
wrong, typically you just get a blank screen. The developer tools show
the error messages, and you can test things on-the-fly.<br/><br/>

<a href="http://jsfiddle.net">jsfiddle</a> is a huge help for learning
javascript and D3. There are separate boxes for html, css, javascript,
and the result.
</aside>
<p class="pg">17</p></section>





<section>
<h3><a href="http://coffeescript.org">Coffeescript</a> is awesome!</h3>

<div id="coffee" class="medtop">
<p><code>blob.attr("x", <font class="highlight">(d) -> d.x</font>)</code><br/><br/>
<code>height = options<font class="highlight">?.</font>height ? 500</code>
</p>
</div>

<aside>
(I think maybe I&rsquo;ve seen the <a
href="http://www.lego.com/en-us/movie">Lego Movie</a> too many
times.)<br/><br/>

I&rsquo;m using <a href="http://coffescript.org">CoffeeScript</a>
rather than javascript. It gets translated to javascript, and
it&rsquo;s a much nicer language.<br/><br/>

Particularly nice are the light-weight anonymous
functions. You&rsquo;ll be writing <em>a lot</em> of anonymous
functions in D3.<br/><br/>

Also, there&rsquo;s a simple syntax for handling <code>null</code>
values, for things like options.<br/><br/>
</aside>
<p class="pg">18</p></section>


<section>
<h3><a href="http://coffeescript.org">Coffeescript</a> is awesome!</h3>

<div id="coffee" class="medtop">
<p><code>blob.attr("x", <font class="highlight">(d) -> d.x</font>)</code><br/><br/>
<code>height = options<font class="highlight">?.</font>height ? 500</code>
</p>
</div>

<a href="http://jsfiddle.net/kbroman/cfscr/94">
    <img height=600 style="position:fixed;bottom:10px;left:200px;" src="Figs/jsfiddle_coffee.png">
</a>

<aside>
And you can use <a href="http://jsfiddle.net">jsfiddle</a> with
CoffeeScript.
</aside>
<p class="pg">18</p></section>













<section>
<h3>Summary</h3>

<ul class="tight">
  <li>Bulleted lists</li>
  <ul class="lowlight">
    <li>easy to create</li>
    <li>not very exciting or memorable</li></ul>

  <li>Illustrations and graphs</li>
  <ul class="lowlight">
    <li>more interesting; more memorable</li>
    <li>can convey complex ideas</li></ul>

  <li>Simple animations</li>
  <ul class="lowlight">
    <li>add interest</li>
    <li>help guide students&rsquo; focus</li></ul>

  <li>Interactive graphics</li>
  <ul class="lowlight">
    <li>creation requires specialized skills</li>
    <li>fun to play with</li>
    <li>enable data exploration</li>
    <li>exploring &rarr; learning</li></ul>

  <li>The blackboard is still an important option</li>

</ul>

<aside>
It&rsquo;s always good to have a summary slide with your key points.
</aside>
<p class="pg">19</p></section>



<section>
<h3>Resources</h3>

<div class="indent">
  <p><a href="http://d3js.org" class="highlight">D3</a> by <a href="http://bost.ocks.org/mike" rel="author">Mike Bostock</a>

  <p><a href="http://coffeescript.org" class="highlight">CoffeeScript</a> by <a
  href="https://github.com/jashkenas">Jeremy Ashkenas</a>

  <p><a href="http://alignedleft.com/tutorials/d3"
  class="highlight">D3 tutorials</a> (and <a
  href="http://www.amazon.com/exec/obidos/ASIN/1449339735/7210-20">book</a>)
  by <a href="http://alignedleft.com">Scott Murray</a>

  <p><a href="http://eloquentjavascript.net"
  class="highlight"><i>Eloquent JavaScript</i></a> by <a href="http://marijnhaverbeke.nl">Marijn Haverbeke</a>

  <p><a href="http://pragprog.com/book/tbcoffee/coffeescript"
  class="highlight"><i>CoffeeScript</i> book</a> by <a href="http://trevorburnham.com">Trevor Burnham</a>
</div>

<aside>
The interactive examples
were produced with the <a href="http://d3js.org">D3</a>
library (written in JavaScript).<br><br>

I wrote the code in CoffeeScript,
which is translated to JavaScript but is a better-designed
language.<br><br>

<a
href="http://eloquentjavascript.net"><i>Eloquent JavaScript</i></a> is
a great free book.  The <a
href="http://pragprog.com/book/tbcoffee/coffeescript"><i>CoffeeScript</i></a>
book is not free but is also great; you need to learn at least a bit of
JavaScript first.<br><br>

<a href="http://alignedleft.com/tutorials/d3">Scott
Murray&rsquo;s D3 tutorials</a> are superb and are a great place to start
for learning D3; he&rsquo;s since written <a
href="http://www.amazon.com/exec/obidos/ASIN/1449339735/7210-20">a
book</a>.<br><br>
</aside>
<p class="pg">20</p></section>



<section>

<div class="hugetop">
<p class="large"><font class="gray">slides</a>: &nbsp;
<code><a href="http://www.biostat.wisc.edu/~kbroman/presentations/iGraphs4Teaching">bit.ly/Bro2014-11b</a></code>
&nbsp; <img style="vertical-align:middle;" width="150px" src="Figs/cc-zero.png" /></p>


<p class="large"><code>
<a href="http://kbroman.org" class="gray">kbroman.org</a><br/>
</code></p>

<p class="large"><code>
<a href="https://github.com/kbroman" class="gray">github.com/kbroman</a><br/>
</code></p>

<p class="large"><code>
<a href="https://twitter.com/kwbroman" class="gray">@kwbroman</a>
</code></p>

</div>

<aside>
This is where to find me.<br/><br/>

In particular, you can find all of my papers, talks, and software.
</aside>
<p class="pg">21</p></section>



<script type="text/javascript" src="JS/stack.v0.js"></script>
<script type="text/javascript" src="JS/handle_stickies.js"></script>
</body>
</html>
